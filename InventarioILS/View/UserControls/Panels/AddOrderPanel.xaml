<UserControl x:Class="InventarioILS.View.UserControls.AddOrderPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:InventarioILS.View.UserControls"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <!-- Reutilizo/defino estilos para encabezados y celdas -->
        <Style x:Key="DataGridHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#232323"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="Foreground" Value="#E6E6E6"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>

        <Style x:Key="DataGridRowStyle" TargetType="DataGridRow">
            <Setter Property="Background" Value="{StaticResource SecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="56"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <StackPanel>
            <!-- Encabezado de la sección: Nuevo Pedido | Pedido #N | Confirmar -->
            <Grid Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Nuevo Pedido" FontSize="22" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="Pedido #3" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                <Button Grid.Column="2" Width="100" Height="30" Style="{StaticResource RoundedButton}" Background="{StaticResource AccentBrush}" FontWeight="Bold" Content="Confirmar" VerticalAlignment="Center" HorizontalAlignment="Right" />
            </Grid>

            <!-- Descripción grande con borde turquesa -->
            <TextBox MinHeight="28" MaxHeight="130" Style="{StaticResource RoundedInput}" AcceptsReturn="True" TextWrapping="Wrap"
             BorderBrush="{StaticResource AccentBrush}" Background="#222" Foreground="#E6E6E6" />

            <!-- Espacio -->
            <Rectangle Height="12" Fill="Transparent"/>

            <!-- Contenedor de lista de items del pedido dentro de borde turquesa -->
            <Border BorderBrush="{StaticResource AccentBrush}" BorderThickness="3" CornerRadius="4" Padding="12" Background="{StaticResource SecondaryBrush}">
                <DataGrid x:Name="OrderItemsGrid"
                          ItemsSource="{Binding OrderItems}" AutoGenerateColumns="False"
                          CanUserAddRows="True" CanUserDeleteRows="True" IsReadOnly="False"
                          GridLinesVisibility="None"
                          ColumnHeaderHeight="44" RowHeight="48" FontSize="14"
                          Background="Transparent" 
                          ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}"
                          CellStyle="{StaticResource DataGridCellStyle}"
                          RowStyle="{StaticResource DataGridRowStyle}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Código" Binding="{Binding Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="120" />
                        <DataGridTextColumn Header="Categoría" Binding="{Binding Category, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="160" />
                        <DataGridTextColumn Header="Subcategoría" Binding="{Binding Subcategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="160" />
                        <DataGridTextColumn Header="Descripción" Binding="{Binding Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*" />
                        <DataGridTextColumn Header="Tipo" Binding="{Binding Type, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="100" />
                        <DataGridTextColumn Header="Cant." Binding="{Binding Quantity, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="70" />

                        <DataGridTemplateColumn Header="">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="+" Width="28" Height="28" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="Padding" Value="6"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Background" Value="Transparent"/>
                                </Style>
                            </DataGridTemplateColumn.CellStyle>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>
